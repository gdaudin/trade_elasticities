
version 15
/*GD 27/10/2011*/
/*Ce programme compte le nombre de produits sans prix par rapport à ceux qui ont des prix*/
/*À différents niveaux d'agrégation*/
/*Rq : on pourrait aussi le faire % au commerce total ?*/

clear all
set mem 500M
set matsize 800
set more off
*on my laptop:
*global dir "G:\LIZA_WORK\GUILLAUME_DAUDIN\COMTRADE_Stata_data"
*at OFCE:
global dir "F:\LIZA_WORK\GUILLAUME_DAUDIN\COMTRADE_Stata_data"
*at ScPo:
*global dir "E:\LIZA_WORK\GUILLAUME_DAUDIN\COMTRADE_Stata_data"
*GD

display "`c(username)'"
if strmatch("`c(username)'","*daudin*")==1 {
	global dir "~/Documents/Recherche/OFCE Substitution Elasticities local"
	cd "$dir/Data/For Third Part/"

}


if "`c(hostname)'" =="ECONCES1" {
	global dir "/Users/liza/Documents/LIZA_WORK"
	cd "$dir/GUILLAUME_DAUDIN/COMTRADE_Stata_data/SITC_Rev1_adv_query_2015/sitcrev1_4dgt_light_1962_2013"
}


*****************
use  "$dir/Résultats/Troisième partie/zéros/Nbrdezeros.dta", clear

collapse (sum) commerce_paire_avec_uv_agg5 commerce_paire_avec_uv_agg4 commerce_paire_avec_uv_agg3 commerce_paire_avec_uv_agg2 commerce_paire_avec_uv_agg1 ///
				commerce_paire, by(year)

				 
gen share_non_uv5 = 1-commerce_paire_avec_uv_agg5/commerce_paire
label var share_non_uv "Share of trade in value without uv" 
twoway (line  share_non_uv year), title("4'-digit") name(share_of_trade_without_uv_5)

foreach agg of numlist 1(1)4 {
	gen share_non_uv`agg' = 1-commerce_paire_avec_uv_agg`agg'/commerce_paire
	label var share_non_uv`agg' "Share of trade in value without uv" 
	twoway (line  share_non_uv`agg' year), title("`agg'-digit") name(share_of_trade_without_uv_`agg')
}

graph combine  share_of_trade_without_uv_5 share_of_trade_without_uv_4  share_of_trade_without_uv_3  share_of_trade_without_uv_2 share_of_trade_without_uv_1, ycommon

graph save "$dir/Git/trade_elasticites_Rédaction_tex/Graph_missing_uv.pdf", replace

********************


